"use strict";(self.webpackChunkcateringApp=self.webpackChunkcateringApp||[]).push([[929],{6929:(I,u,r)=>{r.r(u),r.d(u,{RegisterModule:()=>T});var g=r(6895),l=r(3060),f=r(6119),o=r(4006),p=r(262),C=r(2843),h=r(8505),t=r(4650),P=r(4961),d=r(7009),M=r(2645),v=r(4859),O=r(7392),m=r(9549),Z=r(4144),s=r(3546);function F(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please fill all fields. "),t.qZA())}function A(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," User already exists. "),t.qZA())}const R=[{path:"",component:(()=>{class e{constructor(n,a,c,x){this._formBuilder=n,this._usersService=a,this._snackBar=c,this._router=x,this.areAllFieldsFilled=!0,this.isRegistrationFailed=!1}ngOnInit(){this.registerFormGroup=this._formBuilder.group({nameCtrl:["",o.kI.required],mailCtrl:["",o.kI.required],passwordCtrl:["",[o.kI.required,this.passwordValidator()]],repeatPasswordCtrl:["",o.kI.required]})}passwordValidator(){return n=>!n.touched||/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(n.value)?null:{incorrectPassword:{value:n.value}}}register(){if(!this.checkIfAreAllFieldsFilled())return;const n=this.createNewUser();this._usersService.register(n).pipe((0,p.K)(a=>(this.isRegistrationFailed=!0,(0,C._)(()=>a))),(0,h.b)(()=>{this.isRegistrationFailed=!1,this._router.navigate(["login"]),this.openSnackBar()})).subscribe()}checkIfAreAllFieldsFilled(){return!Object.keys(this.registerFormGroup.controls).find(n=>this.registerFormGroup?.get(n)?.errors?.required)||(this.areAllFieldsFilled=!1,!1)}createNewUser(){return{firstname:this.registerFormGroup.controls.nameCtrl.value,email:this.registerFormGroup.controls.mailCtrl.value,password:this.registerFormGroup.controls.passwordCtrl.value,confirmPassword:this.registerFormGroup.controls.repeatPasswordCtrl.value}}openSnackBar(){this._snackBar.open("You can now log in!","Close",{duration:3e3,panelClass:["custom-snackbar"]})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.qu),t.Y36(P.f),t.Y36(d.ux),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:44,vars:3,consts:[[1,"form-container"],[1,"form-title"],[1,"form-content",3,"formGroup"],["appearance","outline"],["matInput","","type","text","formControlName","nameCtrl","required",""],["matSuffix",""],["matInput","","type","email","formControlName","mailCtrl","email",""],["matInput","","type","password","formControlName","passwordCtrl","required",""],["matInput","","type","password","formControlName","repeatPasswordCtrl","required",""],[4,"ngIf"],["mat-raised-button","","type","submit",3,"click"],[1,"redirect"],["routerLink","/login"]],template:function(n,a){1&n&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0)(2,"mat-card")(3,"mat-card-title",1),t._uU(4,"Sign up"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"form",2)(7,"p")(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"First name"),t.qZA(),t._UZ(11,"input",4),t.TgZ(12,"mat-icon",5),t._uU(13,"account_circle"),t.qZA()()(),t.TgZ(14,"p")(15,"mat-form-field",3)(16,"mat-label"),t._uU(17,"E-mail"),t.qZA(),t._UZ(18,"input",6),t.TgZ(19,"mat-icon",5),t._uU(20,"mail"),t.qZA()()(),t.TgZ(21,"p")(22,"mat-form-field",3)(23,"mat-label"),t._uU(24,"Password"),t.qZA(),t._UZ(25,"input",7),t.TgZ(26,"mat-icon",5),t._uU(27,"key"),t.qZA()()(),t.TgZ(28,"p")(29,"mat-form-field",3)(30,"mat-label"),t._uU(31,"Repeat password"),t.qZA(),t._UZ(32,"input",8),t.TgZ(33,"mat-icon",5),t._uU(34,"repeat"),t.qZA()()(),t.YNc(35,F,2,0,"mat-error",9),t.YNc(36,A,2,0,"mat-error",9),t.TgZ(37,"button",10),t.NdJ("click",function(){return a.register()}),t._uU(38," Confirm "),t.qZA()()(),t.TgZ(39,"mat-card-footer")(40,"span",11),t._uU(41,"Already have an account? "),t.TgZ(42,"a",12),t._uU(43,"Sign in"),t.qZA()()()()()),2&n&&(t.xp6(6),t.Q6J("formGroup",a.registerFormGroup),t.xp6(29),t.Q6J("ngIf",!a.areAllFieldsFilled),t.xp6(1),t.Q6J("ngIf",a.isRegistrationFailed))},dependencies:[g.O5,l.yS,M.S,v.lW,O.Hw,m.TO,m.KE,m.hX,m.R9,Z.Nt,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.on,o.sg,o.u,s.a8,s.dn,s.n5,s.rt],styles:["[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2em}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1em}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 2em}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:.5em;color:#fcf6f5;background-color:#901}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .redirect[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:1em}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .redirect[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:4px;cursor:pointer;text-decoration:none;transition:color .3s}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .redirect[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0021a5}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{margin-top:-1em;margin-bottom:1em}"]}),e})(),canActivate:[f.a]}];let y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(R),l.Bz]}),e})();var U=r(6269);let T=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,y,U.m,s.QW,d.ZX]}),e})()}}]);